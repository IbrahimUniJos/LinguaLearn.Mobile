<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="LinguaLearn.Mobile.Views.LessonCompletePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:material="clr-namespace:HorusStudio.Maui.MaterialDesignControls;assembly=HorusStudio.Maui.MaterialDesignControls"
    xmlns:viewmodels="clr-namespace:LinguaLearn.Mobile.ViewModels"
    Title="Lesson Complete"
    x:DataType="viewmodels:LessonCompleteViewModel"
    BackgroundColor="{AppThemeBinding Light={StaticResource BackgroundLight},
                                      Dark={StaticResource BackgroundDark}}"
    NavigationPage.HasNavigationBar="False">

    <Grid RowDefinitions="*,Auto">
        <!--  Main Content  -->
        <ScrollView Grid.Row="0">
            <StackLayout
                Padding="40"
                Spacing="30"
                VerticalOptions="Center">

                <!--  Celebration Animation Area  -->
                <StackLayout HorizontalOptions="Center" Spacing="20">
                    <Label
                        FontSize="80"
                        HorizontalOptions="Center"
                        Text="🎉" />

                    <Label
                        FontFamily="OpenSansSemibold"
                        FontSize="28"
                        HorizontalOptions="Center"
                        HorizontalTextAlignment="Center"
                        Text="{Binding CongratulationsMessage}"
                        TextColor="{AppThemeBinding Light={StaticResource OnBackgroundLight},
                                                    Dark={StaticResource OnBackgroundDark}}" />

                    <Label
                        FontFamily="OpenSansRegular"
                        FontSize="18"
                        HorizontalOptions="Center"
                        HorizontalTextAlignment="Center"
                        Text="{Binding GetCelebrationMessage}"
                        TextColor="{AppThemeBinding Light={StaticResource OnSurfaceVariantLight},
                                                    Dark={StaticResource OnSurfaceVariantDark}}" />
                </StackLayout>

                <!--  XP Reward Card  -->
                <material:MaterialCard
                    Padding="30"
                    BackgroundColor="{StaticResource Primary}"
                    CornerRadius="20"
                    HorizontalOptions="Center"
                    WidthRequest="280">
                    <StackLayout HorizontalOptions="Center" Spacing="15">
                        <Label
                            FontSize="60"
                            HorizontalOptions="Center"
                            Text="{Binding GetXpCelebrationIcon}" />

                        <Label
                            FontFamily="OpenSansSemibold"
                            FontSize="24"
                            HorizontalOptions="Center"
                            HorizontalTextAlignment="Center"
                            Text="{Binding XpMessage}"
                            TextColor="{StaticResource OnPrimary}" />

                        <Label
                            FontFamily="OpenSansRegular"
                            FontSize="14"
                            HorizontalOptions="Center"
                            HorizontalTextAlignment="Center"
                            Text="Experience Points Earned"
                            TextColor="{StaticResource OnPrimary}" />
                    </StackLayout>
                </material:MaterialCard>

                <!--  Achievement Stats  -->
                <material:MaterialCard
                    Padding="20"
                    BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceLight},
                                                      Dark={StaticResource SurfaceDark}}"
                    CornerRadius="15">
                    <StackLayout Spacing="15">
                        <Label
                            FontFamily="OpenSansSemibold"
                            FontSize="18"
                            HorizontalOptions="Center"
                            Text="Lesson Summary"
                            TextColor="{AppThemeBinding Light={StaticResource OnSurfaceLight},
                                                        Dark={StaticResource OnSurfaceDark}}" />

                        <Grid
                            ColumnDefinitions="*,*"
                            ColumnSpacing="20"
                            RowDefinitions="Auto,Auto"
                            RowSpacing="15">
                            <StackLayout
                                Grid.Row="0"
                                Grid.Column="0"
                                HorizontalOptions="Center"
                                Spacing="5">
                                <Label
                                    FontSize="24"
                                    HorizontalOptions="Center"
                                    Text="📚" />
                                <Label
                                    FontFamily="OpenSansRegular"
                                    FontSize="12"
                                    HorizontalOptions="Center"
                                    Text="Lesson"
                                    TextColor="{AppThemeBinding Light={StaticResource OnSurfaceVariantLight},
                                                                Dark={StaticResource OnSurfaceVariantDark}}" />
                                <Label
                                    FontFamily="OpenSansSemibold"
                                    FontSize="14"
                                    HorizontalOptions="Center"
                                    Text="Completed"
                                    TextColor="{AppThemeBinding Light={StaticResource OnSurfaceLight},
                                                                Dark={StaticResource OnSurfaceDark}}" />
                            </StackLayout>

                            <StackLayout
                                Grid.Row="0"
                                Grid.Column="1"
                                HorizontalOptions="Center"
                                Spacing="5">
                                <Label
                                    FontSize="24"
                                    HorizontalOptions="Center"
                                    Text="⭐" />
                                <Label
                                    FontFamily="OpenSansRegular"
                                    FontSize="12"
                                    HorizontalOptions="Center"
                                    Text="XP Earned"
                                    TextColor="{AppThemeBinding Light={StaticResource OnSurfaceVariantLight},
                                                                Dark={StaticResource OnSurfaceVariantDark}}" />
                                <Label
                                    FontFamily="OpenSansSemibold"
                                    FontSize="14"
                                    HorizontalOptions="Center"
                                    Text="{Binding XpEarned}"
                                    TextColor="{AppThemeBinding Light={StaticResource OnSurfaceLight},
                                                                Dark={StaticResource OnSurfaceDark}}" />
                            </StackLayout>

                            <StackLayout
                                Grid.Row="1"
                                Grid.Column="0"
                                HorizontalOptions="Center"
                                Spacing="5">
                                <Label
                                    FontSize="24"
                                    HorizontalOptions="Center"
                                    Text="🎯" />
                                <Label
                                    FontFamily="OpenSansRegular"
                                    FontSize="12"
                                    HorizontalOptions="Center"
                                    Text="Progress"
                                    TextColor="{AppThemeBinding Light={StaticResource OnSurfaceVariantLight},
                                                                Dark={StaticResource OnSurfaceVariantDark}}" />
                                <Label
                                    FontFamily="OpenSansSemibold"
                                    FontSize="14"
                                    HorizontalOptions="Center"
                                    Text="100%"
                                    TextColor="{AppThemeBinding Light={StaticResource OnSurfaceLight},
                                                                Dark={StaticResource OnSurfaceDark}}" />
                            </StackLayout>

                            <StackLayout
                                Grid.Row="1"
                                Grid.Column="1"
                                HorizontalOptions="Center"
                                Spacing="5">
                                <Label
                                    FontSize="24"
                                    HorizontalOptions="Center"
                                    Text="🏅" />
                                <Label
                                    FontFamily="OpenSansRegular"
                                    FontSize="12"
                                    HorizontalOptions="Center"
                                    Text="Status"
                                    TextColor="{AppThemeBinding Light={StaticResource OnSurfaceVariantLight},
                                                                Dark={StaticResource OnSurfaceVariantDark}}" />
                                <Label
                                    FontFamily="OpenSansSemibold"
                                    FontSize="14"
                                    HorizontalOptions="Center"
                                    Text="Mastered"
                                    TextColor="{StaticResource Primary}" />
                            </StackLayout>
                        </Grid>
                    </StackLayout>
                </material:MaterialCard>
            </StackLayout>
        </ScrollView>

        <!--  Action Buttons  -->
        <StackLayout
            Grid.Row="1"
            Padding="20,10,20,30"
            Spacing="15">

            <Button
                BackgroundColor="{StaticResource Primary}"
                Command="{Binding ContinueLearningCommand}"
                CornerRadius="25"
                FontAttributes="Bold"
                FontSize="16"
                HeightRequest="56"
                Text="Continue Learning"
                TextColor="{StaticResource OnPrimary}" />

            <StackLayout Orientation="Horizontal" Spacing="15">
                <Button
                    BackgroundColor="Transparent"
                    BorderColor="{StaticResource Primary}"
                    BorderWidth="1"
                    Command="{Binding ShareAchievementCommand}"
                    CornerRadius="25"
                    FontSize="14"
                    HeightRequest="48"
                    HorizontalOptions="Fill"
                    Text="Share Achievement"
                    TextColor="{StaticResource Primary}" />

                <Button
                    BackgroundColor="Transparent"
                    Command="{Binding GoToHomepageCommand}"
                    CornerRadius="25"
                    FontSize="14"
                    HeightRequest="48"
                    HorizontalOptions="Fill"
                    Text="Go Home"
                    TextColor="{AppThemeBinding Light={StaticResource OnSurfaceVariantLight},
                                                Dark={StaticResource OnSurfaceVariantDark}}" />
            </StackLayout>
        </StackLayout>
    </Grid>
</ContentPage>